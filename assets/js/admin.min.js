let Tasks=(s=>{let o=()=>{s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"get_tasks"},success:function(t){if("error"===t.type)d();else{let i=s(".todo-list__tasks");i.html(""),t.data.forEach(t=>{i.append(e(t))})}}})},t=()=>{s(".todo-list__add-task").on("submit",function(t){t.preventDefault();var i,a,t=s("#tldTitle"),e=s("#tldDescription");i=t.val(),a=e.val(),s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"create_task",title:i,description:a},success:function(t){("error"===t.type?d:o)()}}),t.val(""),e.val(""),s(".todo-list__add-task").slideToggle()})},i=()=>{s(".todo-list__edit-task").on("submit",function(t){t.preventDefault();var t=s(this).find("input[name='id']").val(),i=s(this).find("input[name='title']").val(),a=s(this).find("textarea").val();s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"update_task",id:t,title:i,description:a},success:function(t){("error"===t.type?d:o)()}}),s(".todo-list__edit-task").hide()})},a=()=>{s(".todo-list__tasks").on("click",".todo-list__tasks--item__delete",function(){var t=s(this).data("id");confirm("Are you sure?")&&s.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"delete_task",id:t},success:function(t){("error"===t.type?d:o)()}})})},e=t=>`
    <li class="todo-list__tasks--item">
      <div>
        <h3>${t.title}</h3>
        <p>${t.description}</p>
      </div>
      <div>
        <button class="todo-list__btn todo-list__btn--primary todo-list__tasks--item__edit" data-id="${t.id}">Edit</button>
        <button class="todo-list__btn todo-list__btn--secondary todo-list__tasks--item__delete" data-id="${t.id}">Delete</button>
      </div>
    </li>
    `,d=()=>{alert("Something went wrong!")};return{init:()=>{o(),s(".todo-list__add-btn").on("click",function(){s(".todo-list__add-task").slideToggle()}),t(),s(".todo-list__tasks").on("click",".todo-list__tasks--item__edit",function(){var t=s(this).data("id"),i=s(this).parent().siblings().find("h3").text(),a=s(this).parent().siblings().find("p").text(),e=s(".todo-list__edit-task");e.show(),e.find("input[name='id']").val(t),e.find("input[name='title']").val(i),e.find("textarea").val(a)}),s(".todo-list__edit-task--close").on("click",function(){s(".todo-list__edit-task").hide()}),i(),a()}}})(jQuery);jQuery(document).ready(function(){Tasks.init()});