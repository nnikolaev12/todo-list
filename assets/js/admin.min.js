let Tasks=(e=>{let o=()=>{e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"get_tasks"},success:function(t){let i=e(".todo-list__tasks");var a=e(".todo-list__tasks--empty");"error"===t.type?(i.html(""),a.show()):(i.html(""),a.hide(),t.data.forEach(t=>{i.append(s(t))}))}})},t=()=>{e(".todo-list__add-task").on("submit",function(t){t.preventDefault();var i,a,t=e("#tldTitle"),s=e("#tldDescription");i=t.val(),a=s.val(),e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"create_task",title:i,description:a},success:function(t){("error"===t.type?d:o)()}}),t.val(""),s.val(""),e(".todo-list__add-task").slideToggle()})},i=()=>{e(".todo-list__edit-task").on("submit",function(t){t.preventDefault();var t=e(this).find("input[name='id']").val(),i=e(this).find("input[name='title']").val(),a=e(this).find("textarea").val();e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"update_task",id:t,title:i,description:a},success:function(t){("error"===t.type?d:o)()}}),e(".todo-list__edit-task").hide()})},a=()=>{e(".todo-list__tasks").on("click",".todo-list__tasks--item__delete",function(){var t=e(this).data("id");confirm("Are you sure?")&&e.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"delete_task",id:t},success:function(t){("error"===t.type?d:o)()}})})},s=t=>`
    <li class="todo-list__tasks--item">
      <div>
        <h3>${t.title}</h3>
        <p>${t.description}</p>
      </div>
      <div>
        <button class="todo-list__btn todo-list__btn--primary todo-list__tasks--item__edit" data-id="${t.id}">Edit</button>
        <button class="todo-list__btn todo-list__btn--secondary todo-list__tasks--item__delete" data-id="${t.id}">Delete</button>
      </div>
    </li>
    `,d=()=>{alert("Something went wrong!")};return{init:()=>{o(),e(".todo-list__add-btn").on("click",function(){e(".todo-list__add-task").slideToggle()}),t(),e(".todo-list__tasks").on("click",".todo-list__tasks--item__edit",function(){var t=e(this).data("id"),i=e(this).parent().siblings().find("h3").text(),a=e(this).parent().siblings().find("p").text(),s=e(".todo-list__edit-task");s.show(),s.find("input[name='id']").val(t),s.find("input[name='title']").val(i),s.find("textarea").val(a)}),e(".todo-list__edit-task--close").on("click",function(){e(".todo-list__edit-task").hide()}),i(),a()}}})(jQuery);jQuery(document).ready(function(){Tasks.init()});