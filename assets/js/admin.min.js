let Tasks=(l=>{let r=()=>{l.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"get_tasks"},success:function(t){let a=l(".todo-list__tasks");var e=l(".todo-list__tasks--empty");"error"===t.type?(a.html(""),e.show()):(a.html(""),e.hide(),t.data.forEach(t=>{a.append(i(t))}))}})},t=()=>{l(".todo-list__add-task form").on("submit",function(t){t.preventDefault();let a,e,i;var s,o;l(this).serializeArray().forEach(t=>{"title"===t.name?a=t.value:"description"===t.name?e=t.value:"add_new_task"===t.name&&(i=t.value)}),t=a,s=e,o=i,l.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"create_task",title:t,description:s,nonce:o},success:function(t){"error"===t.type?_(t.message):r()}}),l("#tldAddTitle").val(""),l("#tldAddDescription").val(""),l(".todo-list__add-task").slideToggle()})},a=()=>{l(".todo-list__edit-task form").on("submit",function(t){t.preventDefault();let a,e,i,s;var o,d,n;l(this).serializeArray().forEach(t=>{"title"===t.name?a=t.value:"description"===t.name?e=t.value:"id"===t.name?i=t.value:"edit_new_task"===t.name&&(s=t.value)}),t=i,o=a,d=e,n=s,l.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"update_task",id:t,title:o,description:d,nonce:n},success:function(t){"error"===t.type?_(t.message):r()}}),l(".todo-list__edit-task").hide()})},e=()=>{l(".todo-list__tasks").on("click",".todo-list__tasks--item__delete",function(){var t=l(this).data("id");confirm("Are you sure?")&&l.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"delete_task",id:t},success:function(t){("error"===t.type?_:r)()}})})},i=t=>`
    <li class="todo-list__tasks--item">
      <div>
        <h3>${t.title}</h3>
        <p>${t.description}</p>
      </div>
      <div>
        <button class="todo-list__btn todo-list__btn--primary todo-list__tasks--item__edit" data-id="${t.id}">Edit</button>
        <button class="todo-list__btn todo-list__btn--secondary todo-list__tasks--item__delete" data-id="${t.id}">Delete</button>
      </div>
    </li>
    `,_=t=>{alert(t||"Something went wrong. Please try again.")};return{init:()=>{r(),l(".todo-list__add-btn").on("click",function(){l(".todo-list__add-task").slideToggle()}),t(),l(".todo-list__tasks").on("click",".todo-list__tasks--item__edit",function(){var t=l(this).data("id"),a=l(this).parent().siblings().find("h3").text(),e=l(this).parent().siblings().find("p").text(),i=l(".todo-list__edit-task");i.show(),i.find("input[name='id']").val(t),i.find("input[name='title']").val(a),i.find("textarea").val(e)}),l(".todo-list__edit-task--close").on("click",function(){l(".todo-list__edit-task").hide()}),a(),e()}}})(jQuery);jQuery(document).ready(function(){Tasks.init()});